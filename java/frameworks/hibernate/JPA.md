JPA - Java Persistence API.

# Исходная

Я вдруг понял, что не совсем понимаю, что именно включает в себя JPA. Я знаю, что:

* Это спецификация, т.е. она определяет некий интерфейс, который бы позволил работать с БД.
* Чтобы непосредственно работать с БД, есть конкретные реализации JPA, например, Hibernate (еще есть EclipseLink). Т.е. мы в своих программах, грубо говоря, используем интерфейсы JPA, а в качестве реализации подключаем Hibernate. И теоретически можем потом перейти на другую реализацию, если нужно.
* Сначала появился Hibernate и он всем так понравился, что по его подобию и сделали спецификацию JPA, с некоторыми оговорками. И только потом разрабы Hibernate допилили его для соответствия с JPA, поэтому у них все-таки есть некоторые различия. Какие именно - я не знаю, может быть в Hibernate больше аннотаций и каких-то классов, которые отсутствуют в спецификации, с целью сделать ее более общей и исключить Hibernate-специфичные вещи.
* В JPA есть разные аннотации, вроде @Id, @Entity, @Table и классы вроде EntityManager. Аналогичные аннотации есть и в хибере. Насчет классов - не уверен. Наверное они называются так же как и в JPA, иначе бы мы не смогли подменять реализации.

# Добавляем

Дополняем знания:

* Спецификация JPA является одной из множества спецификаций Java EE

* JPA определяет интерфейсы для выполнения объекто-реляционного мэпинга и *управления хранимыми объектами*. Т.е. все-таки не только мэпинг, но и все остальные операции по хранению, извлечению, обновлению и т.д.

* Чтобы пользоваться API из JPA, нужна зависимость самого JPA:

  ```xml
  <dependency>
      <groupId>javax.persistence</groupId>
      <artifactId>javax.persistence-api</artifactId>
      <version>2.2</version>
  </dependency>
  ```

  и зависимость реализации, например, Hibernate:

  ```xml
  <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-core</artifactId>
      <version>5.1.11</version>
  </dependency>
  ```

  UPD. Достаточно только зависимости хибера, при этом jakarta.persistence-api подтягивается сама.







# Вопросы

- [ ] > Вот мы подключаем зависимости от JPA и Hibernate, а в коде используем JPA-шные пакеты и классы\аннотации. Но как программа узнает, что нужно использовать реализацию Hibernate?

  Возможно, дело в том, что persistence.xml - это тоже часть JPA и поскольку там указывается провайдер, то так программа и понимает, что используется реализация в лице Hibernate. Мы ведь когда создаем EntityManagerFactory, указываем ей имя persistence-unit'а из этого файла.

  Так что возможно какая-то базовая часть вроде чтения такого файла все-таки реализована в JPA?

  UPD. Точный ответ такой: JPA - это не просто абстрактная спецификация. Пакет jakarta.persistence-api содержит кроме интерфейсов еще и вполне конкретные классы, которые делают конкретные вещи. В частности, загрузчик провайдеров, который ищет в classpath все классы провайдеров и потом один из них создает конкретную фабрику. Блин... Чтобы знать про фабрику, нужно и другое читать... Короче пока так напишу.