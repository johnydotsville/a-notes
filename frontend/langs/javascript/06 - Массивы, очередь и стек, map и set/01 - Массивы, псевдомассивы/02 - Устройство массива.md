# Устройство массива

## Массив - это объект

Внутри массив является объектом. Соответственно, к нему применимы все правила, касающиеся объектов, например копирование по ссылке.

Движок js проводит оптимизации, за счет которых массивы работают быстро. Если мы начинаем работать с массивом как с обычным объектом, то движок начинает рассматривать его как обычный объект и соответственно отключает все оптимизации.

Триггером для отключения оптимизаций служат:

* Добавление массиву произвольных свойств.

  ```javascript
  let arr = ["Яблоко", "Апельсин", "Груша"];
  arr.comment = "Массив с фруктами";
  ```

* Создание "дыр" между элементами.

  ```javascript
  let arr = ["Яблоко", "Апельсин", "Груша"];
  arr[100] = "Ананас";
  ```

* Заполнение массива в обратном порядке.

  ```javascript
  let arr = [];
  arr[1] = "Апельсин";
  arr[0] = "Яблоко";
  ```

* Хранение в массиве разнородных данных:

  ```javascript
  let arr = [
    "Яблоко", 
    { name: "Tom" }, 
    function() { console.log("Функция хранится в массиве.") },
    true
  ];
  
  
  console.log(arr[0]);  // Яблоко
  console.log(arr[1].name);  // Tom
  arr[2]();  // Функция хранится в массиве.
  ```

## Индексы - это свойства

Числа, которые мы указываем в квадратных скобках, чтобы получить доступ к индексу массива, являются не более чем свойствами объекта. Причем они являются строковыми свойствами, т.е. указанное в скобках число преобразуется в строку. А сам синтаксис квадратных скобок для массива - то же самое, что обращение к произвольному свойству объекта:

```javascript
const arr = ["Tom", "Huck"];
console.log(arr[0]);  // <-- Это число преобразуется в строку
console.log(arr["1"]);  // <-- А тут уже указана строка, поэтому преобразования не будет
console.log(arr["length"]);  // 2, просто обращаемся к свойству, то же самое что arr.length
```

Раз индексы, это свойства, то можно удалить элемент массива оператором `delete`, как обычное свойство объекта:

```javascript
const arr = ["Tom", "Huck"];
delete arr[0];  // <-- length остается равным 2

arr.forEach(i => console.log(i));
```

Однако такое удаление сделает массив разреженным. Удалять таким образом элементы не надо, для этого есть метод splice.