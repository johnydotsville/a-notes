# ИЛИ и И

Обычные правила:

* Операторы пытаются привести операнды к логическому типу для выполнения сравнения.

* Вычисление выражений идет слева направо.

* Приоритет "И" выше, чем у "ИЛИ". Т.е. сначала вычисляются все "И", а потом начинают вычисляться "ИЛИ".

* "Сокращенное вычисление".

  * "ИЛИ" идет до первого истинного выражения.

    ```javascript
    true  || alert("Никогда не сработает.");
    false || alert("Сработает всегда.");
    ```

  * "И" идет до первого ложного выражения.

Хитрые правила:

* "ИЛИ" *возвращает* первое истинное выражение. Если же все выражения оказались ложными, то просто возвращает последнее. Примеры:

  ```javascript
  alert(0 || true || 1 || "foobar");  // Выведет true, как первое истиное выражение.
  alert(0 || "" || false);  // Выведет false, т.к. тут все ложь, а false - последняя ложь.
  ```

  ```javascript
  let firstname = "";
  let lastname = "";
  let nickname = "Johnny C"
  
  let user = firstname || lastname || nickname || "Аноним";  // в user будет строка "Johnny C"
  ```

  Здесь первым истинным выражением оказалось nickname, поэтому оператор || вернул его.

* "И" *возвращает* первое *ложное* выражение. Если же все выражения оказались истинными, то возвращает последнее. Пример:

  ```javascript
  alert(true && "foobar" && 0 && 1);  // Выведет 0, как первое ложное значение.
  alert(true && 1 && "foobar");  // Выведет foobar, т.к. тут все истина, а foobar - последнее.
  ```

Традиционное использование, например, в условиях:

```javascript
let isWeekend = true;
let hour = 15;

if (hour < 9 || hour > 18 || isWeekend) {
  alert("Офис закрыт.")
}
```

# НЕ и Двойное Не

Оператор НЕ `!` приводит операнд к логическому типу и инвертирует его. Оператор двойного не `!!` просто приводит операнд к логическому типу (по сути аналог `Boolean(a)`). Например:

```javascript
let a = true;
a = !a;  // Теперь a false

let b = "hello";
let c = !b;    // false, привел "hello" к логическому true и инвертировал.
let d = !!b;   // true, просто привел "hello" к логическому true и оставил как есть.
let e = !!!b;  // false
```

# Упражнения

```javascript
alert( null || 2 || undefined );
```

Ответ: 2. Первое истинное.

```javascript
alert( alert(1) || 2 || alert(3) );
```

Ответ: 1, 2. Вызов alert возвращает undefined. Так что первый alert выполнится и вернет undefined. Поскольку || расценит этот undefined как ложь, то пойдет проверять дальше, второе выражение, 2. Поскольку оно - истина, то 2 оператор не будет проверять дальше, вернет эту двойку, которая попадет во внешний alert.

```javascript
alert( 1 && null && 2 );
```

Ответ: null. Первое ложное.

```javascript
alert( alert(1) && alert(2) );
```

Ответ: 1, undefined. Выполнится alert, поэтому 1. Это выполнение вернет undefined, которое расценивается как ложь и поэтому оператор && вернет его во внешний alert.

```javascript
alert( null || 2 && 3 || 4 );
```

Ответ: 3. Сначала выполнится && т.к. она приоритетнее. 2 и 3 оба истина, поэтому вернется 3 и общее выражение примет вид `null || 3 || 4`. Или вернет первую истину, т.е. 3.

