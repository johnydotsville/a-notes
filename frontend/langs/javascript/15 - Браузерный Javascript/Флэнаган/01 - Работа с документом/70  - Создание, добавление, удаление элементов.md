# API для работы с элементами

## Создание элемента, .createElement()

`Document` позволяет нам создать элемент с помощью метода `.createElement()`. Он принимает строку с тегом, а возвращает экземпляр `Element`, если тег распознан и удалось создать нужный элемент:

```javascript
const p = document.createElement("p");
console.log(p instanceof Element);  // true
```

Если тег не распознан, то возвращается экземпляр `HTMLUnknownElement`:

```javascript
const foobar = document.createElement("foobar");
console.log(foobar instanceof HTMLUnknownElement);  // true
```

## Добавление детей элементу, .append() и .prepend()

* `.append()` - метод добавляет элементу детей в конец.
* `.prepend()` - метод добавляем элементу детей в начало.

Оба метода принимают неограниченное количество аргументов через запятую. Аргументом может быть элемент или строка. Если строка, тогда из нее автоматически создается текстовый элемент. Эти методы можно применять только на элементах-тегах. На текстовых элементах очевидно нельзя, потому что внутри текста не может быть других элементов.

```html
<body>
</body>
```

```javascript
const p1 = document.createElement("p");
p1.innerText = "Предвижу все: вас оскорбит";

const p2 = document.createElement("p");
p2.innerText = "Печальной тайны объясненье.";

const p3 = document.createElement("p");
p3.innerText = "Какое горькое презренье";

document.body.append(p2);   // <-- Добавим элементу ребенка в конец.
document.body.prepend(p1);  // <-- Добавим элементу ребенка в начало.
document.body.append(p3, "Ваш гордый взгляд изобразит!")  // <-- Добавим разом несколько детей.
```

Стало:

```html
<body>
  <p>Предвижу все: вас оскорбит</p>
  <p>Печальной тайны объясненье.</p>
  <p>Какое горькое презренье</p>
  Ваш гордый взгляд изобразит!
</body>
```

Как видим, из строки "Ваш гордый взгляд изобразит" был создан текстовый элемент. А элементы-абзацы, которые мы создали явно, добавились как абзацы.

## Добавление соседей элементу, .after() и .before()

* `.after()` - метод добавляет элементу соседа после него.
* `.before()` - метод добавляет элементу соседа перед ним.

Оба метода принимают неограниченное количество аргументов через запятую. Аргументом может быть элемент или строка. Если строка, тогда из нее автоматически создается текстовый элемент. Методы можно применять на элементах любых типов.

```html
<body>
  <p>Печальной тайны объясненье.</p>
</body>
```

```javascript
const origin = document.querySelector("p");

const p1 = document.createElement("p");
p1.innerText = "Предвижу все: вас оскорбит";

const p2 = document.createElement("p");
p2.innerText = "Какое горькое презренье";

origin.before(p1);
origin.after(p2, "Ваш гордый взгляд изобразит!");
```

## Повторное добавление элемента, клонирование

При добавлении элементов нужно помнить, что каждый элемент является уникальным объектом и не может присутствовать одновременно в разных частях разметки. Поэтому, если уже добавленный элемент добавить еще раз, то из предыдущего места он автоматически удалится.

Если нужно разместить элемент в нескольких местах, тогда нужно его сначала клонировать. Вызываем на нем метод `.cloneNode(true)` и добавляем этот клон в нужное место. С true метод возвращает глубокий клон, со всеми элементами внутри клонируемого.

Важно: обработчики событий, добавленные элементу через addEventListener, не переносятся на клон.

```html
<body>
  <p>Предвижу все: вас оскорбит</p>
  <p>Печальной тайны объясненье.</p>
  <p>Какое горькое презренье</p>
  <p>Ваш гордый взгляд изобразит!</p>
  <div>Автор строк - Пушкин А.С.</div>
  <button onclick="add()">Добавить</button>
  <button onclick="klone()">Клонировать</button>
</body>
```

```javascript
const author = document.querySelector("div");

function add() {
  document.body.prepend(author);
}

function klone() {
  const k = author.cloneNode(true);
  document.body.prepend(k);
}
```

После нажатия на кнопку "Добавить" div переместится в начало body, потому что не может существовать одновременно в двух местах. Если нажать на "Клонировать", тогда клоны элемента будут добавляться как самостоятельные элементы.

## Удаление элемента, .remove()

Чтобы удалить элемент, надо вызвать на нем метод `.remove()`

```html
<body>
  <p>Предвижу все: вас оскорбит</p>
  <p>Печальной тайны объясненье.</p>
  <p>Какое горькое презренье</p>
  <p>Ваш гордый взгляд изобразит!</p>
  <div>Автор строк - Пушкин А.С.</div>
  <button onclick="rem()">Удалить</button>
</body>
```

```javascript
function rem() {
  const author = document.querySelector("div");
  author.remove();
}
```

## Замена элемента на другой, .replaceWith()

Чтобы заменить элемент, нужно вызывать на нем метод `.replaceWith(elem)`, передав элемент, на который производится замена:

```html
<body>
  <p>Предвижу все: вас оскорбит</p>
  <p>Печальной тайны объясненье.</p>
  <p>Какое горькое презренье</p>
  <p>Ваш гордый взгляд изобразит!</p>
  <div>Автор строк - Пушкин А.С.</div>
  <button onclick="rep()">Заменить</button>
</body>
```

```javascript
function rep() {
  const author = document.querySelector("div");
  const another = document.createElement("p");
  another.innerText = "Фрагмент романа 'Евгений Онегин', отрывок 'Письма Онегина к Татьяне.'";
  author.replaceWith(another);  // <-- Заменяем элемент на другой.
}
```





