| Документация                                       |
| -------------------------------------------------- |
| https://webpack.js.org/configuration/resolve/      |
| https://webpack.js.org/concepts/module-resolution/ |

# Секция resolve

Секция `resolve` конфига вебпака предназначения для настройки *резолвера*.

```javascript
module.exports = {
  // Остальная часть вебпак-конфига
  resolve: {
    // <-- Настройки резолвера
    // extensions,
    // alias,
    // modules,
    // ...остальные
  }
};
```

Резолвинг - это процесс поиска модуля (файла). Когда мы импортируем какой-то модуль, нужно найти где он лежит. Поиск ведется по указанному пути (*path*). Например, в конструкции

```
import hello from "/src/utils.js";
```

Путь это `/src/utils.js` .

# extensions

```javascript
module.exports = {
  resolve: {
    extensions: ['.tsx', '.ts', '.js']  // <-- Настраиваем очередность проверки расширений.
  }
};
```

При импорте мы указываем т.н. "path".  Если в пат мы написали путь непосредственно до файла и при этом указали его расширение, тогда никаких дополнительных действий от резолвера не требуется. Если расширения нет, то резолвер берет расширения из массива `extensions` и по очереди примеряет их к пату. Как только обнаруживается файл, он сразу и выбирается.

# alias

Алиасы - это псевдонимы путей. Длинному пути можно задать короткий алиас, чтобы проще ссылаться на модули из этой директории. Алиасы реализуются вебпаком, через настройки резолвера.

## Настройка алиасов

### webpack.config.js

Добавляем в конфиг вебпака в секцию резолвера секцию `alias`:

```javascript
const path = require('path');

module.exports = (settings, argv) => {
  return {
    // Остальная часть конфига
    resolve: {
      // Остальные настройки резолвера
      alias: {
        "@components": path.resolve(__dirname, "src/foo/bar/components")
      }
    }
  }
};
```

* `@components` - алиас, может быть любым. Использовать `@` в имени не обязательно, но так принято для наглядности.
* Путь до директории, на которую указывает алиас.

### tsconfig.json

Если в проекте используется typescript, нужно добавить несколько опций в его конфиг:

```yaml
{
  "compilerOptions": {
    # Остальные опции компиляции
    "baseUrl": "./",
    "paths": {
      "@components/*": ["src/foo/bar/components/*"]
    }
  }
}
```

## Использование алиасов

После настройки алиаса можно использовать его в импортах:

```javascript
import { App } from "./foo/bar/components/App";  // <-- Без алиаса
```

```javascript
import { App } from "@components/App";  // <-- С алиасом
```

# modules

Путь до модуля бывает трех видов.

* Абсолютный путь начинается с `/`:

  ```javascript
  import hello from "/src/utils.js";
  ```

* Относительный путь начинается с `.` или `..`:

  ```javascript
  import hello from "./utils.js";
  ```

* "Модульный" путь - это путь, который не начинается ни с `/`, ни с `.` (`..`):

  ```javascript
  import hello from "foo/bar";
  ```

Модульные пути работают как раз благодаря настройке `modules`. [Документация](https://webpack.js.org/concepts/module-resolution/#module-paths) и небольшая [статья](https://dev.to/tjasa/super-simple-imports-with-webpack-resolve-150). В этом случае файл ищется в директориях, указанных в настройке `modules`:

```yaml
resolve: {
  modules: ['node_modules']
}
```

Эта настройка имеет вменяемые значения по умолчанию. За счет этого мы можем писать, например, `import { useState } from 'react';` вместо абсолютного или относительного пути. Без этого пришлось бы писать, например `import { useState } from "../../../node_modules/react"`.

