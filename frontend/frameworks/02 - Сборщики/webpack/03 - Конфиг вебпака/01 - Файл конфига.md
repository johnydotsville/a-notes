# Файл конфига

Файл конфигурации вебпака:

* Называется `webpack.config.js`. Представляет собой код на JS, с импортами \ экспортами в Node-стиле.
  * Конфиг можно писать не только на js, но и на typescript. Тогда название файла должно быть с расширением `.ts` и для этого нужно поставить дополнительные пакеты и использовать *лоадеры*.
* Класть конфиг нужно в корневую директорию проекта.
* Конфиг - это объект, поля которого представляют собой различные настройки проекта. Файл должен экспортировать либо непосредственно объект, либо функцию, которая возвращает объект.
  * Функция нужна, когда мы хотим получить в конфиге параметры, переданные через скрипт билда \ запуска. Это рассмотрено в отдельном конспекте про переменные окружения.

Пример базового конфига, экспортирующего объект:

```javascript
// <-- В начале импортируем классы, функции, константы - все, что используется далее в коде
const path = require('path');

module.exports = {  // <-- Конфиг экспортируется в виде объекта, поля которого - настройки вебпака
  mode: 'development',
  entry: './src/index.js',
  output: {
    filename: 'main.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true
  },
};
```

Пример конфига, экспортирующего функцию:

```javascript
const path = require('path');

module.exports = (settings, argv) => {  // <-- Экспортируем не объект, а функцию с двумя параметрами.
  console.log(settings.port);

  // <-- Можно анализировать полученные значения параметров и предпринимать разные дополнительные действия.
  if (argv.mode === "development") {
    console.log("Сборка запущена в режиме разработки.");
  } else if (argv.mode === "production") {
    console.log("Сборка запущена в режиме продакшена.");
  }

  return {  // <-- Функция возвращает объект конфига.
    mode: argv.mode,  // <-- "Не-env" параметры становятся полями второго параметра функции.
    entry: './src/index.js',
    output: {
      filename: 'main.js',
      path: path.resolve(__dirname, settings.targetDir),
      clean: true
    }
  }
}
```

