# Создание проекта

webpack-проект это обычный node-проект, в который установлены нужные пакеты. Поэтому для начала просто создаем пустой node-проект в любой директории:

```
npm init -y
```

В ней появится файл конфига node-проекта, `package.json`

Добавим директорию `src`, и в нее два файла, чтобы было что собирать:

```javascript
// Файл index.js
import hello from "./utils.js";

hello();
```

```javascript
// Файл utils.js
function hello() {
  console.log("Hello, webpack and typescript!");
}

export default hello;
```

# Подключение вебпака

Для начала работы с вебпаком требуется два пакета:

```
npm i webpack webpack-cli -D
```

- `webpack` - это основная зависимость, собственно сам вебпак.
- `webpack-cli` - это модуль для работы с вебпаком через консоль.
- `-D` - это ключ, указывающий на то что эти зависимости нам нужны только для разработки нашей программы. Когда наша программа будет выполняться, эти зависимости ей уже не пригодятся. Подробнее про типы зависимостей и ключи - в конспекте про пакеты в nodejs.

# Файл конфигурации вебпака

Файл конфигурации вебпака:

* Называется `webpack.config.js` 
  * Конфиг можно писать не только на js, но и на typescript. Тогда название файла должно быть с расширением `.ts` Настройка конфига на ts разобрана в отдельном конспекте про конфиг.
* Класть конфиг нужно в корневую директорию проекта.

Пример базового конфига:

```javascript
const path = require('path');

module.exports = {
  mode: 'development',
  entry: './src/index.js',
  output: {
    filename: 'main.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true
  },
};
```

Про структуру конфига подробнее в отдельном конспекте. Вкратце:

* `mode` - режим сборки. Может быть `development` или `production`. Влияет на то, какие оптимизации \ шаги вебпак будет выполнять при сборке проекта.
* `entry` - главный файл приложения, "точка входа".
* `output` - настройки результата сборки.
  * `filename` - имя для файла, который получится в результате сборки.
  * `path` - директория, в которую нужно положить результирующий файл.
    * `__dirname` - node-константа. Ссылается на директорию, в которой лежит текущий файл.
  * `clean: true` - указывает, что нужно очищать целевую директорию перед каждой сборкой.

# Скрипты вебпака

## Написание скриптов

Для сборки вебпак-проекта нужно написать скрипты в конфиге самого node-проекта (файл `package.json`), в секции `scripts`. Пример самого базового скрипта:

```yaml
{
  "name": "mywebpack",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {  # <-- Секция скриптов
    "build": "webpack"  # <-- Самый простой скрипт сборки с помощью вебпака
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "webpack": "^5.93.0",
    "webpack-cli": "^5.1.4"
  }
}
```

## Запуск скриптов

Запускаются скрипты консольной командой `npm run имяСкрипта` из директории с конфигом, например:

```
npm run build
```

## Имя скрипта

Можно давать скриптам более специализированные имена для наглядности, например `build:dev`, `build:prod` и т.д. Полезное, когда есть несколько скриптов сборки с разными параметрами:

```yaml
{
  "name": "mywebpack",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {  # <-- Секция скриптов
    "build:dev": "webpack --mode=development",  # <-- Скрипт для сборки в dev-режиме
    "build:prod": "webpack --mode=production"   # <-- Скрипт для сборки в prod-режиме
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "webpack": "^5.93.0",
    "webpack-cli": "^5.1.4"
  }
}
```

# Подключение бандла к html-странице

При сборке проекта надо подключить бандл к html-странице. Это делается с помощью плагина `html-webpack-plugin`. О нем в соответствующем конспекте в папке описания конкретных плагинов.

# Запуск проекта

Для локального запуска понадобится dev-сервер, если не хочется каждый раз руками перезагружать страницу. Про дев-сервер есть отдельный конспект.

Без dev-сервера можно просто собрать проект и вручную открыть страницу.

