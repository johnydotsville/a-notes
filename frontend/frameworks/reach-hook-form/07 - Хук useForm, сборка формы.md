# Хук useForm

Хук `useForm` возвращает объект, в свойствах которого много всего - другие объекты, методы. Все это нужно для управления формой. Все эти вещи дают нам разные возможности по управлению и взаимодействию с формой.

```typescript
const { 
  control, 
  watch, 
  setValue,
  // Остальное
} = useForm();
```

Сводная таблица средств, которые предоставляет хук:

| Возможность                | Зачем нужна                                               | Кто дает       |
| -------------------------- | --------------------------------------------------------- | -------------- |
| Подписка на поле.          | Повторный рендер, если значение в поле изменится.         | `watch`        |
| Ошибки формы.              | После валидации получить ошибки из полей формы.           | `errors`       |
|                            |                                                           |                |
|                            |                                                           | `getValues`    |
|                            |                                                           |                |
| Флаг "Форма отправляется". | Для понимания, форма уже отправилась или пока в процессе. | `isSubmitting` |
|                            |                                                           |                |
|                            |                                                           | `register`     |
|                            |                                                           |                |

# Вещи из хука

## register

Принимает название поля формы (как в схеме) и возвращает объект (наверное) со вспопогательными вещами. Среди них - имя, ссылка, обработчик изменения значения, обработчик получения фокуса и мб что-то еще.

Все эти вещи мы прицепляем к непосредственным элементам формы, что избавляет нас от необходимости писать обработчики для изменения значения и т.д. Т.о. библиотека дает нам состояние формы - бери и пользуйся.

## watch

Это функция, которая позволяем нам подписаться на изменения значения формы и вызвать повторный рендер. Передаем ей название поля формы (как в схеме), а она нам возвращает значение (мы используем его для чтения). Если в форме произойдет изменение этого значения (например в поле ввода введут что-то новое), то watch приведет к перезагрузке формы и вернет нам обновленное значение.

```typescript
const acc = watch("account");
```

```typescript
const [accFrom, accTo] = watch(["accountFrom", "accountTo"]);
```



TODO: useWatch

TODO: со значениями по умолчанию

```typescript
const watchedFields = watch({
  firstName: "", // начальное значение (опционально)
  lastName: "",
});
```



TODO: Умеет отписываться. Возвращает объект подписки, через который можно отписаться.

```javascript
useEffect(() => {
  const subscription = watch((value) => {
    console.log("Форма изменилась:", value);
  });
  return () => subscription.unsubscribe(); // отмена подписки при размонтировании
}, [watch]);
```







## formState

TODO

доступ к ошибкам - errors

флаг отправки - isSubmitting





## rules

TODO



## control 

TODO

## isSubmitting

TODO: после отправки формы (допустим, обычной формы html безо всяких наворотов), есть ли какой-то флаг, отправилась она уже окончательно, обработал ли ее сервер? Возвращает ли сервер какой-то ответ после этого?





# Сборка формы

TODO: здесь написать про техники дополнительные, типа как привязать к форме обработчик, как сделать чтобы кнопка отправки была не доступна, пока отправка не завершена и т.д.



TODO: Поля-числа, +register для вложенных полей, обязательность valueAsNumber для чисел

```react
<input type="number" {...register("user.age", { valueAsNumber: true })} />
```





# Значения по умолчанию для полей формы

Пример для схемы:

```javascript
const schema = z.object({
  password: z.string(),
  confirmPassword: z.string(),
  user: z.object({
    firstname: z.string(),
    lastname: z.string(),
    age: z.number()
  })
});
```

При указании значений по умолчанию соблюдаем вложенность как в схеме:

```typescript
const {
	// вещи из хука
} = useForm<FormData>({
  resolver: zodResolver(schema),
  defaultValues: {  // <-- Задаем значения по умолчанию.
    password: "оченьсложныйпароль(нет)",
    user: {
      firstname: "Вася",
      lastname: "Горностаев"
    }
  },
});
```





# TODO

* ```typescript
  Path, useForm, UseFormRegister, SubmitHandler
  ```

  