# Жизненный цикл компонента

У каждого компонента свой жизненный цикл. Он состоит из трех этапов:

* Монтирование (mount) - момент появления компонента в реальном интерфейсе.
* Обновление (update) - когда изменяется состояние компонента и он перерисовывается.
* Размонтирование (umount) - момент исчезновения компонента из реального интерфейса. Например, скрытие компонента или переход на другую страницу.

# Эффекты

В компоненте есть три вида логики:

* Код рендеринга. Это код, который формирует тело функции компонента. Он должен быть чистым, т.е. не содержать сайд эффектов. Его назначение - рассчитать как должен выглядеть компонент и вернуть соответствующий JSX. Он зависит только от пропсов и текущего состояния компонента.
* Код обработчиков событий. Это функции, которые мы навешиваем на события элементов. Они меняют состояние компонента, т.е. содержат сайд-эффекты. Их особенность в том, что они вызываются исключительно при возникновении события, например, щелчок по кнопке, изменение значения в текстовом поле и т.д.
* **Эффекты** - часто бывает необходимость, чтобы функция с сайд-эффектом выполнилась не только по щелчку кнопки или другому событию, вызванному взаимодействием пользователя с интерфейсом, а выполнилась в связи с самим фактом отрисовки компонента. Например, нужно загрузить исходные данные с сервера и отобразить в компоненте. Для этого существует третий вид логики - **эффекты**.

Эффекты выполняются после коммита компонента в дерево, т.е. когда уже реальный дом отобразился в браузере. На примере загрузки исходных данных это выглядит примерно так:

* В коде рендеринга компонента мы регистрируем эффект с загрузкой данных.
* Компонент отрисовывается без данных.
* Срабатывает эффект по загрузке данных, + где-то здесь же мы устанавливаем эти данные в состояние компонента.
* Поскольку состояние изменилось, компонент перерисовывается и данные отображаются.

Эффекты следует использовать только когда нужны какие-то действия, *внешние по отношению к реакту*. Например, загрузка данных, отправка статистики и т.д. Если все, что происходит в эффекте - это коррекция состояния на основе каких-то локальных значений, то в таком случае не нужно использовать эффекты.

Можно сказать, что единственно правильное использование эффектов - это синхронизация с внешними системами.





# TODO

TODO:

* Эффект начинает работу не сразу? Т.е. вот вызывается первый раз рендер компонента, а в нем есть эффект. useEffect просто поставит задачу на будущее? Поэтому первый раз компонент отрисуется без данных?