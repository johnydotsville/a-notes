* Virtual DOM - устаревший термин. Так раньше называли дерево из React-элементов.
* В современном реакте на смену дереву из react-элементов пришло fiber-дерево. Это дерево из fiber-элементов.



* Рендеринг - это процесс построения fiber-дерева. Не надо путать из-за слова "рендеринг" с отрисовкой реального интерфейса.
  * Рендеринг компонента - это создание fiber-элемента.
    * Функция компонента возвращает react-элемент, а реакт из него сразу создает fiber-элемент.
  * Все fiber-элементы вместе образуют fiber-дерево.
  * Рендеринг происходит асинхронно, так что реакт может строить дерево довольно долго, приостанавливая его формирование, чтобы например обработать пользовательский ввод.
    * Построение одного fiber-узла не прерывается, если началось. Прерваться может построение дерева в целом. Например, дочерние узлы могут построиться в следующий заход.
    * Такая работа с прерываниями называется ConcurrentMode.
      * Прерывания делаются например ради обработки пользовательского ввода и анимаций для большей плавности интерфейса.
    * Но самый первый рендер, когда приложение только запустилось, происходит синхронно.
      * Это значит, что пока fiber-дерево не построится полностью, реальный интерфейс не появится.
        * ??? Исключение - ленивые компоненты, они могут появиться позже.
        * Это касается только первого рендера.
* WIP-дерево (work-in-progress tree) - это Fiber-дерево.
* Коммит - это процесс, при котором реакт подбирает набор операций по преобразованию реального DOM (createElement и т.д.), чтобы он соответствовал fiber-дереву, и запускает эти операции в работу.
  * Подбор + запуск выполняются в одной синхронной операции.
* 



Эффекты:

* useEffect 
  * Выполнение колбэка из useEffect происходит после фазы коммита, т.е. когда все fiber-дерево целиком построилось и браузер отрисовал реальный интерфейс.