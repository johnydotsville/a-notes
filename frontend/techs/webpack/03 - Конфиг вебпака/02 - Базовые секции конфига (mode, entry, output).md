

# Режим билда (mode)

Режим определяет, какие оптимизации будет использовать вебпак при билде. Какие оптимизации бывают - можно посмотреть [тут](https://webpack.js.org/configuration/optimization/).

```javascript
module.exports = {
  mode: "production"
}
```

Возможные значения mode:

* `production` - режим прода. Примеры применяемых оптимизаций: минификация.
* `development` - режим разработки. Примеры применяемых оптимизаций: TODO
* `none` - вебпак не будет использовать никакие оптимизации при билде.

# Точка входа (entry)

* Точка входа - это главный файл, с которого начинается программа.
* Может быть несколько файлов-точек входа, но в большинстве случаев он только один.
* Точка входа задается параметром `entry`

```javascript
const path = require('path');

module.exports = {
  entry: path.resolve(__dirname, './src/index.ts')  // <-- Главный файл программы, "точка входа".
}
```

> `__dirname` - глобальная константа Node, указывает на директорию, в которой находится текущий файл. В данном случае она указывает на директорию, в которой лежит webpack.config.js

# Таргет директория (output)

Секция для указания, куда складывать артефакты, полученные в результате сборки. Задается параметром `output`:

```javascript
const path = require('path');

module.exports = {
  output: {  // <-- Секция для настроек таргет-директории
    path: path.resolve(__dirname, 'dist'),  // <-- Директория, в которую сложить итоговые файлы.
    filename: '[name].[contenthash].js',  // <-- Имя файла ("бандла"), в который все запакуется при сборке проекта.
    clean: true,  // <-- Очищать таргет-директорию перед каждым билдом.
  },
}
```

## Путь до целевой директории

* `path` - целевая директория, куда складывать сгенерированные файлы.
* `publicPath` - TODO

## Имя бандла

* `filename` - имя главного файла, получаемого после сборки. Этот файл называется *бандл*. Браузер кэширует его, поэтому может получиться так, что после очередной сборки он будет использовать старую версию. Поэтому обычно имя бандла делают не статическим, а динамическим. Для этого есть шаблоны (полный список - в [документации](https://webpack.js.org/configuration/output/#template-strings)):

  * `[name]` - имя файла, по умолчанию вебпак называет его main.
  * `[contenthash]` - берется хэш содержимого файла.

  Шаблоны можно комбинировать, например `[name].[contenthash].js`

## Очистка целевой директории

* `clean` - true \ false, надо ли очищать целевую директорию перед каждым билдом. Работает, начиная с 5 версии вебпака. До 5 версии надо использовать плагины, например clean-webpack-plugin.

