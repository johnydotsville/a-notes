# Собственные хуки

Собственные (или кастомные хуки) - это хуки, которые мы пишем сами и которые используют стандартные реактовские хуки. В хуки можно выносить функциональность из компонента, чтобы сделать его более компактным.

> С виду выглядит так, будто это просто функция, вынесенная в отдельный файл. Можно было бы наверное просто в том же файле создать отдельную функцию ниже. Ну да ладно, пока напишу как есть, потом догуглю, в чем смысл собственных хуков.

## Файл хука

* Файл с хуком имеет расширение `.js`
* Экспорт хука делается через обычный `export`, без `default` (хотя это надо догуглить)

```react
import {useMemo} from 'react';

export const usePosts = (posts, filterParams) => {
  const filteredPosts = useMemo(() => {
    console.log("Применение фильтров к постам.");
    let result = [...posts];
    if (filterParams.sortBy) {
      result.sort(
        (a, b) => a[filterParams.sortBy].localeCompare(b[filterParams.sortBy])
      );
    }
    if (filterParams.searchBy) {
      result = result.filter(p => p.title.toLowerCase().includes(filterParams.searchBy.toLowerCase()));
    }
    return result;
  }, [filterParams, posts]);

  return filteredPosts;
};
```

Использование хука:

```react
import {usePosts} from './components/hooks/usePosts';

function App() {
...
  const filteredPosts = usePosts(posts, filterParams);
```



# Второй пример хука

```javascript
import {useState} from 'react';

export const useFetching = (work) => {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState("");

  const fetching = async () => {
    try {
      setIsLoading(true);
      await work();
    } catch (err) {
      setError(err.message);
    } finally {
      setIsLoading(false);
    }
  }

  return [fetching, isLoading, error];
};
```

Использование хука:

```react
const [fetchPosts, isPostLoading, postError] = useFetching(async () => {
  setPosts(await PostService.getAll());
});
```

