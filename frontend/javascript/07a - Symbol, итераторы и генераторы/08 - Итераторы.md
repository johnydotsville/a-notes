# Что такое итератор

Итератор - это специальный объект, который позволяет:

* Сделать другой объект "перебираемым" в цикле `for ... of`. 
* Разбивать объект на отдельные элементы с помощью spread-оператора `...`

Итератор обязан содержать метод `next()`, который возвращает объект такого вида:

```javascript
// Объект-результат шага итерации
{
  done: true \ false,
  value: значение следующего элемента, если он есть
}
```

Примеры итерируемых объектов: массивы, Map, Set.

# Встроенные итераторы

У массивов, Map и Set есть итераторы и они тоже являются итерируемыми. За счет этого, когда итератор уже частично обойден, можно обойти оставшиеся элементы:

```javascript
const arr = [5, 4, 10, 15, 7];

const rator = arr[Symbol.iterator]();
console.log(rator.next().value);  // 5
console.log(rator.next().value);  // 4

console.log("Rest:");
for (let item of rator) {
  console.log(item);  // 10, 15, 7
}
```

# Как добавить объекту итератор

## Обычный объект

► Для начала нужно создать объект:

```javascript
function Range(from, to) {  // Для примера, создадим его через конструктор.
  this.from = from;
  this.to = to;
}

let range = new Range(1, 7);
```

► Добавить этому объекту функцию, которая вернет итератор. Класть ее надо в специальный символ `[Symbol.iterator]`:

```javascript
// Range.prototype[Symbol.iterator] = function() {  // <-- Более продвинутая версия добавления
range[Symbol.iterator] = function() {  // <-- Добавляем объекту итератор
  return {
    current: this.from,  // <-- Этот this указывает на объект, на котором
    last: this.to,  // вызван метод получения итератора
    next() {
      return (this.current <= this.last) ?  // <-- Этот this уже указывает на сам итератор
        { done: false, value: this.current++ } :
        { done: true }
    }
  };
};
```

► Готово. Можно пользоваться итератором:

```javascript
// Неявно:
for (let item of range) {
  console.log(item);
}

// Явно, для демонстрации:
let rator = range[Symbol.iterator]();  // <-- Получаем итератор.
while (true) {
  let item = rator.next();  // <-- Явно вызываем его метод next()
  if (item.done) break;  // <-- Анализируем, вернулся ли очередной элемент.
  console.log(item.value);
}
```

## Через класс



