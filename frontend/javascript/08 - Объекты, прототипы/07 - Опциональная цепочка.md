# Опциональная цепочка

## Синтаксис

Выглядит как конструкция `?.` Особенности:

* Опциональная цепочка не является оператором, а представляет собой синтаксический сахар.
* Предназначена для безопасной работы со свойствами объекта, которые могут оказаться null или undefined.
  * Конструкция проверяет - если выражение слева от нее undefined, она возвращает undefined. Иначе работает дальше. Следовательно, нужно размещать ее *после* потенциально отсутствующего свойства, а не до.

Примеры:

* Безопасное обращение к свойствам, которых может не быть у объекта. Поддерживается как обычный синтаксис, так и синтаксис доступа через квадратные скобки `[]`:

  ```javascript
  let user = {
    name: "Tom"
  };
  
  console.log(user.address.street);  // Ошибка: "Cannot read properties of undefined (reading 'street')"
  console.log(user.address?.street);  // undefined
  console.log(user.address?.["street"]);  // undefined
  ```

  В первом случае скрипт завершился с ошибкой, в остальных случаях `?.` просто вернул undefined и скрипт не сломался.

* Безопасная попытка вызвать функцию, которой нет в объекте:

  ```javascript
  let user = {
    name: "Tom",
    hello() {
      console.log(`Hello, my name is ${this.name}!`);
    }
  };
  
  user.hello();  // Hello, my name is Tom!
  user.goodbye();  // Ошибка "Uncaught TypeError: user.goodbye is not a function"
  const result = user.goodbye?.();  // Нет ошибки, просто ничего не произошло, result = undefined
  ```

## Замечания

* `?.` стоит использовать только в тех случаях, когда отсутствие значения является нормальным сценарием. Например, адрес пользователя в принципе должен быть, но кто-то мог просто его не заполнить. Не надо использовать `?.` для попыток доступа к вещам, про которые в принципе не известно, существуют ли они.

* Обратите внимание на положение `?.`: `user.address?.street`, а не `user?.address.street`. Конструкция располагается *после* потенциально отсутствующего свойства, а не *до* него. В первом случае предполагается, что может отсутствовать поле адреса. Второй случай означает, что user может быть undefined. Конструкция проверяет - если выражение слева от нее undefined, она возвращает undefined. Иначе работает дальше.

  