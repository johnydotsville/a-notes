# Строки

Тип `string`. В js нет специального типа для отдельного символа. Любые текстовые данные являются строкой в формате UTF-16. Строки в js *неизменяемые*. Как только строка создана, изменить ее невозможно, только перезаписать полностью.

Строки в js бывают двух типов:

* Обычные, заключаются в двойные или одинарные кавычки, без разницы:

  ```javascript
  let firstname = "John";  // Обычная строка.
  let lastname = 'Connor';  // Еще одна обычная строка.
  ```

* Вычисляемые, заключаются в обратные кавычки (на букве Ё и тильде). В таких строках можно разместить любое выражение внутри `${ }`, оно будет вычислено и станет частью строки:

  ```javascript
  let firstname = "John";
  let lastname = 'Connor';
  let fullname = `Полное имя: ${lastname + ", " + firstname}`;  // Полное имя: Connor, John
  ```

  Кроме того, вычисляемая строка может занимать несколько линий:

  ```javascript
  let poety = `Раз прислал мне барин чаю
  И велел его сварить.
  А я отроду не знаю, как хороший чай варить.
  `;
  ```

# Спецсимволы и экранирование

Спецсимволы начинаются со слеша `\`. Слеш также используется для экранирования, когда нужно вставить кавычку или тот же слеш. Например:

```javascript
let spec = "Hello, \n world!";  // Вставили спецсимвол \n
let quot = "I\'m Johny!";       // Экранировали кавычку
```

# Свойства и методы

Полный список можно [посмотреть тут](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String).

## Длина строки

Свойство `length`. Это именно свойство, а не метод:

```javascript
let quot = "I\'m Johny!";
let len = quot.length;  // 10
```

## Получение отдельного символа

Получить символ из конкретной позиции возможно двумя способами. Нумерация ведется с нуля.

► Через квадратные скобки `[]`:

```javascript
//         0123456789
let str = "Hello, strings!";
let fifth = str[5];  // ,
```

► Через метод `.at()`. Его преимущество над скобками в том, что он может принимать отрицательный индекс и таким образом вести отсчет с конца строки. Например, `-1` это будет последний символ:

```javascript
//         0123456789
let str = "Hello, strings!";
let fifth = str.at(5);  // ,
let last = str.at(-1);  // !
```

## Перебор символов

Перебрать все символы в строке можно циклом `for ... of`

```javascript
let str = "Hello, strings!";
for (let ch of str) {  // <-- В переменную ch попадает очередной символ.
  console.log(ch);
}
```

## Изменение регистра

```javascript
let str = "Hello, strings!";
let upp = str.toUpperCase();  // HELLO, STRINGS!
let low = str.toLowerCase();  // hello, strings!
let single = str.at(3).toUpperCase();  // L
```

## Поиск подстроки

► С начала: `str.indexOf(substr [, pos])` ищет substr в строке str, начиная поиск с позиции pos (опционально). Возвращает -1, если подстрока не найдена, или позицию, с которой подстрока нашлась. Регистр имеет значение.

```javascript
//         0123456789
let str = "Widget with id.";

let pos = str.indexOf("id");  // 1
pos = str.indexOf("no");      // -1
pos = str.indexOf("id", 5);   // 12
```

► С конца: `str.lastIndexOf(substr, pos)`

```javascript
//         0123456789
let str = "Widget with id.";

let pos = str.lastIndexOf("id", 13);  // 12
pos = str.lastIndexOf("id", 1);       // 1
pos = str.lastIndexOf("id", 0);       // -1
```

P.S. С первого взгляда не очень понятно, как работает pos в поиске с конца, но думаю, что в целом это не особо важно. Просто если надо найти первое вхождение, то indexOf, а если последнее - то lastIndexOf и все.

► `str.includes(substr [, pos])` более современный метод. Возвращает true \ false в зависимости от того, есть в строке подстрока или нет.

► `str.startsWith(s)` - true \ false проверяет, начинается ли строка с заданного текста.

► `str.endsWith(s)` true \ false проверяет, заканчивается ли строка заданным текстом.

## Извлечение подстроки

► `str.slice(start [, end])` возвращает подстроку в диапазоне `[start, end)`. Скобками я отметил как в математике, включается ли символ или нет. В данном случае это значит, что символ в позиции end не входит в результат. start и end могут быть отрицательными, чтобы указывать позицию от конца строки, если надо.

```javascript
//          987654321
//         0123456789
let str = "javascript";

let sub = str.slice(1);  // avascript
sub = str.slice(1, 4);   // ava
sub = str.slice(1, -1);  // avascrip
sub = str.slice(-3);     // ipt
sub = str.slice(-3, -1); // ip
sub = str.slice(-3, 1);  // "", т.к. некорректный диапазон
```

► `str.substring(start [, end])` тоже возвращает подстроку в диапазоне `[start, end)`. В отличие от slice не умеет отсчитывать от конца строки, а отрицательный индекс расценивает как 0. Если start больше end, то просто меняет их местами.

```javascript
//          987654321
//         0123456789
let str = "javascript";

let sub = str.substring(1);  // avascript
sub = str.substring(1, 4);   // ava
sub = str.substring(4, 1);   // ava
sub = str.substring(1, -1);  // j, потому что -1 будет как 0, а (1, 0) она расценит как (0, 1)
```

► `str.substr(start [, len])` возвращает подстроку, начиная с позиции start длиной len. В отличие от предыдущих функций, второй параметр указывает именно длину, а не позицию символа. Согласно спецификации, этот метод должны поддерживать только браузеры, а остальные среды не обязаны. Однако вроде он поддерживается везде. Считается легаси.

```javascript
//          987654321
//         0123456789
let str = "javascript";

let sub = str.substr(1);  // avascript
sub = str.substr(1, 3);   // ava
sub = str.substr(1, -3);  // "", некорректно
```

## Сравнение с учетом языка

Сравнение строк идет посимвольно. Однако из-за того, что символы в разных языках бывают "с особенностями" (например, Ё, Й, Ö и т.д.), то для сравнения с учетом этих особенностей требуется специальный метод `s1.localeCompare(s2)`. Его результат целое число:

* `-1` : s1 < s2.
* `0` :  s1 == s2.
* `1` : s1 > s2.

```javascript
let res = 'Österreich'.localeCompare('Zealand');  // -1
```

## Убрать пробелы по краям

Убрать пробельные символы в начале и в конце строки позволяет метод `str.trim()`

## Разбить строку на элементы

Метод `str.split(разделитель)` разбивает строку по указанному разделителю и возвращает полученные элементы в виде массива.

```javascript
let str = "Яблоко, Груша, Мандарин, Банан, Апельсин";
let arr = str.split(", ");
console.log(arr);  // ['Яблоко', 'Груша', 'Мандарин', 'Банан', 'Апельсин']
```

Если указать разделителем пустую строку, то исходная строка разобьется посимвольно:

```javascript
let str = "Апельсин";
let arr = str.split("");
console.log(arr);  // ['А', 'п', 'е', 'л', 'ь', 'с', 'и', 'н']
```

