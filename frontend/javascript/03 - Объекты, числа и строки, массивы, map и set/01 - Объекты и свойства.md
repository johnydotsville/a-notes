# Объекты

Объект - это сложный тип данных, обычно состоящий из нескольких свойств.

# Пустой объект

Есть два синтаксиса для создания пустого объекта:

```javascript
let user = new Object();  // Синтаксис "Конструктор объекта".
```

```javascript
let user = {};  // Синтаксис "Литерал объекта", предпочтительный.
```

# Свойства

## Описание свойств

Свойства описываются внутри объекта с виде пары "ключ:значение".

```javascript
let user = {
  name: "Tom",
  "last name": "Sawyer",  // Имя свойства может состоять из нескольких слов.
  age: 14,  // Запятая после последнего свойства - по желанию.
  50: "hello"  // Даже такое имя сгодится, оно преобразуется в строку.
};
```

Свойства могут быть только строками. Все имена свойств, представленные другими типами, преобразуются в строку:

```javascript
let user = {
  "50": "hello",
  50: "goodbye"
};

console.log(user[50]);    // goodbye
console.log(user["50"]);  // goodbye
```

Здесь в объекте в итоге будет единственное свойство "50" со значением "goodbye", а первое значение затрется вторым.

Еще можно создавать свойства на основе вычисляемых выражений, через синтаксис квадратных скобок `[]`. Например:

```javascript
let customProp = "name";
let customPropValue = "Tom";

let user = {
  [customProp]: customPropValue  // В объекте появится свойство "name"
};

console.log(user.name);  // Свойство действительно есть.
```

## Получение значения свойства

Есть два способа обратиться к свойству:

* Через точку `.` Этот способ подходит для обращения к свойствам с нормальными именами:

  ```javascript
  let name = user.name;  // Свойство с "нормальным" именем из одного слова.
  ```

* Через квадратные скобки `[]`. Этот способ позволяет обращаться к свойствам через вычисляемое выражение.

  ```javascript
  let lastname = user["last name"];  // Свойство с именем из двух слов.
  ```

  ```javascript
  let propname = "a" + "g" + "e";
  let prop = user[propname];  // Свойство с именем, которое было вычислено в переменную propname
  ```

  ```javascript
  console.log(user.50);   // Так не пойдет.
  console.log(user[50]);  // А вот так нормально.
  ```

## Короткие свойства

Это синтаксис на случай, когда имя свойства совпадает с именем переменной, из которой берется значение для свойства. Например:

```javascript
let name = "Huck";  // Имя переменной - name и такое же имя для свойства мы хотим в объекте.

let user = {
  name,  // То же самое, что name: name
  age: 14  // Можно смешивать в одном объекте обычные и "короткие" свойства.
};

console.log(user.name);  // Huck, все верно, свойство есть и значение заполнено.
```

# Взаимодействие со свойствами

## Добавление свойства

Можно в любой момент добавить объекту новое свойство, просто обратившись к нему, будто оно уже есть, и присвоив ему значение:

```javascript
user.lastname = "Sawyer";  // В объекте user появится свойство lastname
user["last name"] = "Sawyer";
```

## Удаление свойства

Делается оператором `delete`:

```javascript
delete user.lastname;
delete user["last name"];
```

## Проверка существования

### Оператор in

Проверить, существует ли свойство в объекте, можно оператором `in`:

```javascript
let user = {
  name: "Huck",
  age: 14
};

let ageExist = "age" in user;  // Указываем или непосредственно имя свойства

let propname = "name";
let nameExist = propname in user;  // Или выражение.

console.log(ageExist);   // true
console.log(nameExist);  // true
```

### Проверка через undefined

Дело в том, что можно обратиться даже к несуществующему свойству. В этом случае вернется undefined. На этом строится еще один способ проверить, существует ли свойство:

```javascript
let user = {
  name: "Huck",
  age: 14
};

console.log(user.lastname === undefined);  // true, значит свойства lastname не существует.
```

Но этот способ не очень надежный. Вот почему:

```javascript
let user = {
  name: "Huck",
  age: 14,
  lastname: undefined  // Явно задаем значение undefined, хотя это и плохой стиль.
};

console.log(lastnameExist);  // Опять true. По сути, мы обманулись, ведь свойство есть.
```

## Перебор свойств

Делается с помощью цикла `for (let ... in ...)`

```javascript
let user = {
  name: "Huck",
  age: 14
};

for (let k in user) {  // <-- Объявляем переменную под ключ с произвольным именем, например, k
  console.log("key:" + key + ", value: " + user[k]);  // И в нее попадает имя очередного свойства
}

/*
  key:name, value: Huck
  key:age, value: 14
*/
```

### Порядок свойств

Свойства упорядочены в объекте определенным образом:

* Целочисленные свойства располагаются впереди по возрастанию. Целочисленными называются свойства, имя которых может быть преобразовано в целое число.
* Прочие свойства располагаются в порядке описания.

Например:

```javascript
let user = {
  name: "Huck",
  50: "hello",
  age: 14,
  "30": "world"
};

for (let key in user) {
  console.log("key:" + key + ", value: " + user[key]);
}

// Вывод:
key:30, value: world
key:50, value: hello
key:name, value: Huck
key:age, value: 14
```

Хотя свойство "30" находится в конце, оно вывелось первым, потому что является целочисленным. Аналогично с 50, оно идет сразу после 30. А остальные - name и age - идут в том порядке, в котором появляются в объекте.