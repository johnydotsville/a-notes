# Константы

## const

Константы - это значения, которые по своей природе не должны и не могут изменяться. Их характеристики:

* Объявляются с ключевым словом `const`
* Могут быть объявлены на уровне класса, в методе, во вложенном методе.
* Для констант уровня класса доступны все модификаторы видимости и модификатор new.
* Вычисляются во время компиляции и значение вставляется непосредственно в код. Поэтому:
  * Инициализировать константу можно только значением, которое мб вычислено на стадии компиляции.
  * Если константа определена в сборке А, а "пользователь" константы находится в сборке В, то при изменении значения константы придется также перекомпилировать и сборку В.
* Принадлежат классу, а не экземпляру.

```c#
internal class ConstDemo
{
    public const string Message = "Hello, const!";
    public const double piX2 = System.Math.PI * 2;  // При компиляции уже станет 6,283185307179586
    
    // public const DateTime time = DateTime.Now;  // Невозможно, DateTime.Now не вычисляется при компиляции
    
    public void Method() {
        const bool result = true;
        
        void localMethod() {
            const int magicNumber = 7;
        }
    }
}

...
    
Console.WriteLine(ConstDemo.Message);  // Ok
var cd = new ConstDemo();
Console.WriteLine(cd.Message);  // Ошибка! const не является частью объекта, она принадлежит классу
```

## Константы и static readonly поля

Константы отличаются от static readonly полей концептуально. Без изменения кода константа будет иметь одно и то же значение, в то время как static readonly поле может отличаться, например:

```c#
internal class ConstDiffer {
    public const string Message = "Без переписывания кода эта константа не изменится";
    public static readonly DateTime time = DateTime.Now;
}
```

При каждом запуске программы поле time будет иметь новое значение.

Поэтому, когда хочется создать "константу", нужно хорошо подумать, какого рода эта "константа". "Честная" константа, вроде числа pi, не может измениться в принципе - для таких используем const. Все остальные "константы", вроде версии программы, путей в файловой системе, скорее всего будет правильнее оформить через static readonly поля, т.к. в случае их изменения не придется перекомпилировать их пользователей.

