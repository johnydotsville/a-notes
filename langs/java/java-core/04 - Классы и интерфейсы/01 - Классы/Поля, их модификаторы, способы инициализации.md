# Поля

Поля - это переменные, принадлежащие классу или экземпляру класса (в зависимости от типа поля).

## Обычные поля

Обычные поля - это переменные, принадлежащие экземпляру класса.

```java
public class Player {
    private String nickname;  // Обычное поле
    private String race;  // Обычноые поле
}
```

Характеристики обычных полей:

* Получают значение по умолчанию при создании экземпляра класса.

## Модификаторы полей

| Ключевое слово | Назначение |
| -------------- | ---------- |
|                |            |
|                |            |
|                |            |
|                |            |
|                |            |
|                |            |

## Статические поля

Характеристики статических полей:

* Помечаются ключевым словом `static`
* Принадлежат классу, а не экземпляру.
* Автоматически получают значения по умолчанию.
* Инициализированы и перезаписаны могут быть откуда угодно: конструкторы, блоки инициализация, методы и т.д., ограничений нет.

```java
class StaticFieldsDemo {
    public static String fieldA = "some value for fieldA";  // Инициализация при объявлении

    static {
        fieldA = "value for fieldA";  // Инициализация из статического БИ
    }

    {
        fieldA = "other value for fieldA";  // Инициализация из обычного БИ
    }

    public StaticFieldsDemo(String value) {
        fieldA = value;  // Инициализация из конструктора
    }

    public void changeFieldA(String value) {
        fieldA = value;  // Перезапись в методе
    }
}

StaticFieldsDemo.fieldA = "another one value for fieldA";
```





## Конечные (финальные) поля

Имеют следующие характеристики:

* Помечаются ключевым словом `final`
* Могут быть вдобавок статическими `static`. Для `static final` полей существует свое название "статическая константа", поскольку в Java нет отдельного ключевого слова для констант.
* Не получают значения по умолчанию и поэтому обязаны быть проинициализированы программистом.
* Инициализируются единожды. После инициализации нельзя присвоить другое значение.

  * При этом, если в самом поле лежит изменяемый объект, например, список сотрудников, то сам объект менять можно. Например, добавить в этот список нового сотрудника.
* Инициализировать финальное поле можно следующим образом:

  * Если оно статическое:
    * При объявлении
    * В статическом блоке инициализации

  * Если не статическое:
    * При объявлении
    * В обычном блоке инициализации
    * В конструкторе

```java
public class Player_NonStaticFinalFieldsDemo {
    private final String nickname;
    private final int defaultExp;
    private final int defaultLevel = 1;  // Ok, инициализация при объявлении
    private final String race;
    {
        race = "human";  // Ok, инициализация в обычном блоке инициализации
    }

    public Player(String nickname)
    {
        this.nickname = nickname;  // Ok, инициализация в конструкторе
        initDefaultExp();
    }

    public void changeNickname(String nickname) {
        this.nickname = nickname;  // Ошибка! Нельзя переприсвоить значение.
    }
    
    private void initDefaultExp() {
        this.defaultExp = 100;  // Ошибка!
        // В методах инициализировать финальное полю нельзя, потому что метод
        // может быть вызван в программе несколько раз, а значит будет попытка переприсвоения.             // Компилятор это видит и не разрешает даже первичную инициализацию в методе.
    }
}
```

```java
// Со статическими финальными полями есть только два способа выполнить инициализацию
class StaticFinalFieldsDemo {
    public static final String a = "value for static final field a";
    public static final String b;
    static {
        b = "value for static final field b";
    }
}
```

## Способы инициализации

В качестве инициализатора может быть:

* Литерал.
* Выражение.
* Статический или обычный метод (в отличие от C#, где обычный метод не может использоваться для инициализации поля).

```java
class Player {
    public String nickname = "JohNy";  // Литерал
    public int level = new Random().nextInt(100);  // Выражение
    public String race = chooseRace();  // Статический метод
    public int defaultExp = getDefaultExp();  // Обычный метод

    private static String chooseRace()
    {
        return "human";
    }

    private int getDefaultExp()
    {
        return 100;
    }
}
```





