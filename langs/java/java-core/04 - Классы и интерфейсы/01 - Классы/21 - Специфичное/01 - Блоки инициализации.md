# Блоки инициализации

БИ - это конструкции, в которых можно проинициализировать поля (как обычные, так и статические) до выполнения конструктора. Писать их лучше после объявления полей, которые в них используются (можно и до, но очень не рекомендуется из-за потенциальных ошибок компилятора).

```java
public class Employee {
    public String name;
    public static int startId;
    public int id;
    public int salary = 10_000;
    public static int limit = 100_000;

    static {  // Статический БИ
        Random rand = new Random();
        startId = rand.nextInt(5_000);
    }

    {  // Обычный БИ
        salary *= 2;
        if (salary >= limit)
            salary -= 7_000;
    }

    public Employee(String name) {
        this.id = startId++;
        this.name = name;
    }
}

var tom = new Employee("Tom");
var huck = new Employee("Huck");
System.out.println(tom.id);   // 2043
System.out.println(huck.id);  // 2044
```

Их удобно использовать, если при инициализации используется какая-то логика. В данном примере поле salary сначала будет 10000, а в итоге станет 20000. 

Порядок выполнения такой (на примере выше TODO: общий порядок инициализации мб лучше вынести в отдельный конспект, где собрать все элементы воедино):

* Сначала выполняется "статика".

  * Инициализируются статические поля:
    * startId получает значение 0 по умолчанию.
    * limit инициализируется указанным значением 100_000.
  * Выполняется статический БИ.

  Статические поля и статические БИ инициализируются \ выполняются *единожды* при загрузке класса в память.

* Остальное выполняется при создании экземпляра класса.

  * Поле name получает значение null (дефолт для String), id получает значение 0, salary инициализируется указанным значением 10_000). Именно в таком порядке, потому что так они описаны в классе.
  * Выполняется обычный БИ.
  * Выполняется конструктор.

  Обычные поля и обычные БИ инициализируются \ выполняются каждый раз при создании экземпляра класса.
