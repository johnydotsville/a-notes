# Обертки

Для всех примитивных типов есть соответствующие объектные типы-обертки (wrappers):

```java
Byte
Short
Integer
Long
Float
Double
    
Character
Boolean
```

Несколько свойств оберток:

* Первые шесть являются наследниками класса `Number`.
* Все операции с обертками проводит компилятор, а не виртуальная машина. Т-е все упаковки-распаковки на этапе компиляции заменяются на вызов соответствующих методов, и виртуальная машина получает уже готовый код, который надо просто выполнить.
* Обертки неизменяемые. Любые "изменения" просто приводят к созданию нового объекта.

## Зачем нужны обертки

Обертки полезны по нескольким причинам:

* Содержат различные статические методы, позволяющие, например, преобразовать строку в нужный тип.

* Примитивные типы не могут использоваться в дженериках (подробнее об этом - в конспекте про дженерики)

  ```java
  var ints = new ArrayList<int>(10);  // Ошибка
  var ints = new ArrayList<Integer>(10);  // Ok
  ```

## Правила работы с обертками

Несколько правил для работы с обертками:

* Сравнение на равенство производить только через equals, а не через ==

* Не пользоваться конструктором для создания оберток:

  ```java
  var num = new Integer(5);  // Deprecated! Не надо так делать
  Integer num = 5;  // Автоупаковка сделает все как надо
  var num = Integer.valueOf(5);  // Или вот так
  ```

* В многопоточке не использовать обертки в качестве замков.

# Упаковка-распаковка

Упаковка - это в прямом смысле упаковка примитивного значения в объект-обертку, например, `int -> Integer`. А распаковка - обратный процесс, извлечение значения из обертки и помещение его в примитив.

> Метафорически это так: упаковка (boxing) подразумевает, что когда вы кладете, например, телефон в коробку, в целом теперь эта сущность занимает больше места. Так же и тут - примитивный тип занимает мало места, а объект - много по сравнению с ним, т.е. упаковка - это превращение маленького в большое, т.е. примитивного типа в объектный. Распаковка - обратный процесс.

```java
ArrayList<Integer> ints = new ArrayList<Integer>(10);
ints.add(5);  // авто-упаковка, компилятор развернет это в ints.add(Integer.valueOf(5))
int number = ints.get(0);  // авто-распаковка, развернется в ints.get(0).intValue();

Integer n = 3;  // авто-упаковка
n++;  // распаковка -> инкремент -> упаковка обратно
```

# Методы оберток

У каждой обертки есть методы, специфичные для соответствующего примитивного типа. Но у всех есть похожие:

## Создать объект

С помощью `valueOf` можно получть объект-обертку из строки или из значения:

```java
Integer num = Integer.valueOf("777");
Boolean flag = Boolean.valueOf("true");  // Аналогично Boolean.TRUE

Integer num = Integer.valueOf(777);
Boolean flag = Boolean.valueOf(true);
```

С помощью `parse...` можно получить примитив:

```java
int num = Integer.parseInt("777");
boolean flag = Boolean.parseBoolean("true");
```

## Сравнение значений

```java
int result = Integer.compare(5, 7);  // -1
```

```java
var x = Integer.valueOf(5);
var y = Integer.valueOf(7);
int result = x.compareTo(y);  // -1
```





