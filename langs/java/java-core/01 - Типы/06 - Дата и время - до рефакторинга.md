# Старое API

Старое API для работы с датой и временем это `java.util.Date` and `java.util.Calendar`.

# Новое API

* Появилось в Java 8.
* Потокобезопасное.
* Включает в себя неизменяемые классы из пакета `java.time`:
  * LocalDate, LocalTime, LocalDateTime
  * DayOfWeek, Month
  * Period, Duration
  * прочие

Для большинства характерно наличие таких методов:

* `now()` - вернуть текущее значение элемента даты.
* `of(...)` - создать элемент даты, используя числовые параметры.
* `parse("...")` - создать элемент даты путем разбора строки.

# LocalDate

Представляет дату в ISO формате `yyyy-MM-dd` без времени. Без времени означает, что в составе этого объекта вообще нет времени, а не то что оно равно нулям.

## Текущая дата

```java
var now = LocalDate.now();
```

## Создание даты из параметров

```java
var date = LocalDate.of(2007, 9, 20);
var date = LocalDate.of(2007, Month.SEPTEMBER, 20);
```

```java
var date = LocalDate.parse("2007-09-20");  // 2007-9-20 не распарсится, нужно именно 09
```

Есть возможность парсить более [сложные представления дат](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html).

## Увеличение, уменьшение даты

Любые операции над датой возвращают новый экземпляр даты, потому что дата неизменяемый объект.

```java
var date = LocalDate.of(2007, 9, 20);
LocalDate modified;

modified = date.plusDays(20);  // 2007-10-10
modified = date.plusMonths(20);  // 2009-05-20
modified = date.plusYears(20);  // 2027-09-20
```

```java
modified = date.plus(20, ChronoUnit.DAYS);
modified = date.plus(20, ChronoUnit.MONTHS);
modified = date.plus(20, ChronoUnit.YEARS);

ChronoUnits { HOURS, MINUTES, SECONDS, MILLIS и т.д. }
```

Для уменьшения - аналогичные методы, только начинаются с `minus`.

## Получение частей даты

Из даты можно извлечь часть:

* В виде числа, например:

  ```java
  var date = LocalDate.of(2007, 9, 20);
  
  int day = date.getDayOfMonth();  // 20
  int month = date.getMonthValue();  // 9
  int year = date.getYear();  // 2007
  ```

* В виде отдельного объекта:

  ```java
  DayOfWeek dow = date.getDayOfWeek();
  Month month = date.getMonth();
  ```

  Эти объекты содержат текстовое представление элемента даты и порядковый номер.

## Отношения дат друг с другом

Даты можно сравнить друг с другом на предмет, что было раньше, позже:

```java
boolean tomIsAfterTod = tommorow.isAfter(today);  // true
boolean todIsBeforeTom = today.isBefore(tommorow);  // true
boolean todIsToday = today.isEqual(today);  // true
```

# DayOfWeek

Объект, представляющий собой день недели. Включает в себя два свойства:

* name - текстовое представление дня.
* ordinal - порядковый номер для в неделе, нумерация с нуля. Понедельник - это 0, четверг - 3.

```java
var date = LocalDate.of(2007, 9, 20);
DayOfWeek dow = date.getDayOfWeek();
// name = "THURSDAY"
// ordinal = 3
```

# Month

Объект, представляющий собой месяц года. Включает в себя два свойства:

* name - текстовое представление месяца.
* ordinal - порядковый номер месяца в году, нумерация с нуля. Январь - это 0, четверг - 8.

```java
var date = LocalDate.of(2007, 9, 20);
Month month = date.getMonth();
// name = "SEPTEMBER"
// ordinal = 8
```

# LocalTime

Это время без даты.

```java
var curTime = LocalTime.now();  // 14:57:23.958133
```

## Создание времени из параметров

```java
var time = LocalTime.of(5, 30, 20);
time = time.parse("05:30:20");  // 5 нельзя, нужно 05
```

## Получение частей

```java
curTime.getHour();
curTime.getMinute();
curTime.getSecond();
```

## Уменьшение, увеличение

```java
curTime.plusHours(5);  // minusHours
curTime.plusMinutes(5);
curTime.plusSeconds(5);
```

# LocalDateTime

```java
var date = LocalDateTime.parse("2015-02-20T06:30:00");
```

В целом методы все аналогичные.

# Period

Период - это временной промежуток. Содержит три свойства:

* years - getYears()
* months - getMonths()
* days - getDays()

Все возвращают int с количеством соответствующих частей даты в периоде.

## Создание периода

```java
Period period = Period.of(5, 20, 70);
Period period = Period.ofDays(70);
Period period = Period.ofWeeks(7);
Period period = Period.ofMonths(20);
Period period = Period.ofYears(5);
```

## Разница между датами и период

```java
var date1 = LocalDate.of(2007, 9, 20);
var date2 = LocalDate.now();  // 2023-07-24

Period period = Period.between(date1, date2);

int days = period.getDays();  // 4
int months = period.getMonths();  // 10
int years = period.getYears();  // 15
```

По результатам видно, что количество дней и месяцев в периоде не отражает непосредственное количество дней, прошедших с одного момента до другого. Все потому, что период - это абстрактное понятие. Допустим, мы создаем период в месяц и прибавляем его к конкретной дате, в которой месяц стоит июнь. А потом прибавляем этот же период к другой дате, в которой месяц стоит февраль. Количество дней в обоих случаях получится разное, потому что в январе и июне не одинаковое количество дней. Поэтому эти методы в периоде работают именно так - они возвращают не реальные дни, а условные единицы из самих периодов.

### Количество дней между датами

Чтобы узнать реальное количество дней \ месяцев в периоде, нужно использовать методы хроно-элементов:

```java
long totalDays = ChronoUnit.DAYS.between(date1, date2);  // 5786
```

# Duration





TODO: Переделать конспект, чтобы похожие методы разных классов были рядом. Дописать про Duration.