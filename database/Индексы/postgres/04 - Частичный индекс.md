# Частичный индекс

Это когда индексируется не весь объем данных таблицы, а только какая-то часть. Для создания частичного индекса нужно задать условие в опции `where`:

```sql
create index boarding_passes_boarding_no_partial_bn_grt_100 
on boarding_passes(boarding_no) 
where boarding_no > 100;  -- <-- Проиндексируются только записи, подходящие к этому условию.
```

В результате все записи, у которых номер посадки меньше 100 будут искаться долго, а у которых больше 100 - быстро. Примерные скорости:

```sql
select count(*) from boarding_passes where boarding_no = 108;  -- 16_523 записей, 3мс
select count(*) from boarding_passes where boarding_no = 100;  -- 18_593 записей, 154мс
```

Итого отличие в 51 раз.

Частичный индекс удобен в случаях, когда пользователей особенно интересует какая-то часть данных. Например, особо крупные сделки, начиная от какой-то конкретной суммы. Частичный индекс занимает меньше места, быстрее обновляется.