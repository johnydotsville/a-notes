# HEAD

Концептуально `HEAD` - это указатель на текущий коммит. Грубо говоря, на коммит, на котором мы сейчас находимся.

Когда мы переключаемся на ветку, HEAD указывает на ее последний коммит (не забываем, что ветка сама по себе - это тоже просто именованный указатель на какой-то коммит).

Например, находимся на ветке master, значит HEAD указывает на ее последний коммит, М5 в данном случае:

![head-demo-st1.drawio](img/head-demo-st1.drawio.svg)

Переключаемся на ветку foobar, HEAD начинает указывать на коммит F2:

![head-demo-st2.drawio](img/head-demo-st2.drawio.svg)

# Detached HEAD режим

Когда мы переключаемся на какой-то произвольный коммит, на который нет указателя ветки, то HEAD устанавливается на него и это состояние называется `Detached head`:

![head-demo-st3.drawio](img/head-demo-st3.drawio.svg)

Мы переключились на один из коммитов, используя его хэш, теперь HEAD указывает на M3.

Мы можем создавать новые коммиты в этом состоянии:

![head-demo-st4.drawio](img/head-demo-st4.drawio.svg)

Но если в итоге мы не "создадим ветку", которая будет указывать на эту цепочку "безымянных коммитов" тогда все эти новые коммиты гит потом удалит. Когда именно - зависит от того, когда запустится сборка мусора. Ее можно запускать вручную, либо она сама запускается периодически. При удалении они просто помечаются на удаление, а фактическое уничтожение происходит примерно через 30 дней. Так что за это время еще можно создать ветку и сохранить их.

До создания ветки эти коммиты доступны только по хэшам. Хэш коммита показывается сразу после того как коммит сделан. Если вдруг мы эти хэши не записали или потеряли, то с помощью команды `git reflog` можно посмотреть историю переключений HEAD и найти эти коммиты.


