# Механика откат на коммит

Идея "откатиться на какой-то коммит" предполагает перемещение HEAD и указателя ветки на этот коммит. 

Например, у нас есть ветка foobar и мы находимся на ней в данный момент. Тогда указатель HEAD и указатель foobar будут находиться на одном и том же коммите - последнем коммите, относящемся к этой ветке, `C5`:

![git-reset-concept.drawio](img/git-reset-concept.drawio.svg)

При откате на `C3` указатели HEAD и foobar переместятся на `C3`. В результате весь фрагмент цепочки, оказавшийся "после" новой позиции указателя ветки, подлежит удалению. В данном случае это фрагмент из коммитов C4 и C5. Удаление происходит не мгновенно, "осиротевшие" коммиты еще висят в БД гита около 30 дней и теоретически к ним еще можно получить доступ.

Откатываться можно в разных режимах. Режим определяет, что будет с кодом в рабочей директории и в индексе. Этот код можно как сохранить, так и выбросить.

# Откатиться на указанный коммит

## Выбросить весь код

```
git reset cb42b1650 --hard
```

Флаг `--hard` подразумевает сброс индекса и рабочего каталога. Т.е. мы вернемся к тому состоянию, в котором они были в момент коммита, на который мы откатились.

Хорошо подходит, когда мы что-то писали, коммитили, а потом поняли, что все это - ерунда, от которой надо избавиться без следа.



