# Особенности сохранения в стэш

* В стэш можно сохранять много раз.
  * При этом каждый вызов приводит к созданию новой stash-записи. Иногда их просто так и называют - stash. Я буду называть их записями. Потому что технически стэш один, а записей в нем много.
* Записи организуются в виде стэка. Т.е. запись от последнего выполненного git stash будет в самом начале массива.
* Сохранять можно как все изменения, так и конкретный файл или несколько файлов.
  * Можно даже не все изменения в файле, а только частично.
* Файлы и директории равнозначны. Т.е. когда нам надо застэшить не все вообще, а отдельные файлы или директории, то мы можем указать как отдельные файлы, так и просто имя директории.

# Простое сохранение

```
git stash
```

Сохраняет в стэш все изменения, которые есть в рабочке и индексе. При этом рабочка и индекс принимают вид как в последнем коммите (HEAD).

Сохраненная таким образом запись в списке записей выглядит примерно так:

```
stash@{0}: WIP on tits: 0c3f824 Рефакторинг класса ServiceB
```

WIP означает "Work in progress". После on указывается ветка и хэш коммита, до которого сбросилась рабочка и индекс.

Особенности:

* untracked-файлы не сохраняются. Чтобы их сохранить, нужен флаг `-u`, см соответствующий раздел.

# Сохранение с подписью

```
git stash save "Застэшил правки в ServiceA"
```

Сохраненная запись в списке выглядит так:

```
stash@{0}: On tits: Застэшил правки в ServiceA
```

Это может быть удобнее, чем отметка о коммите, потому что можно например написать "Стэш фичи формы проверки значения" и станет ясно, что когда вернешься к фиче формы, то извлечь надо именно из этой записи.

# Сохранение отдельных файлов

```
git stash push src/foo.ts src/bar.ts
```

Если мы хотим поместить в стэш не все файлы, а только некоторые, мы можем указать их с помощью *подкоманды* `push` 

# Сохранение untracked-файлов

```
git stash -u
git stash --include-untracked
```

```
git stash save "Комментарий" -u
git stash save "Комментарий" --include-untracked
```

С помощью флага `-u` мы можем поместить в стэш неотслеживаемые файлы тоже. Тогда они исчезают из рабочки и не отвлекают от работы в других ветках.
