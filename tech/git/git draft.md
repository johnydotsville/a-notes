# Терминология

Stage

Index

Working tree

# Графический клиент

Команда для запуска дефолтного графического клиента:

```
git gui
```

Весьма удобный клиент, с его помощью можно делать частичный коммит, просматривать историю коммитов.

<img src="img/image-20220608083229745.png" alt="image-20220608083229745" style="zoom:80%;" />



## Настройки

### Кодировка

Если в окне русские буквы отображаются некорректно, заходим в главном меню *Edit > Options*, ищем настройку *Default File Contents Encoding* и меняем на UTF-8.

# Редактор vi

Жизенные команды:

* Кнопка i - перевести vi в режим редактирования текста
* Кнопка Esc - режим восприятия команд
* :wq - сохранить и выйти (набирается в режиме восприятия команд)

# Сценарии

## Задать имя пользователя и почту

Они будут отображаться в информации о коммите.

Задать настройки только для текущего репозитория:

```
git config user.name "Johny Dotsville"
git config user.email "come.as@you.are"
```

## Добавить\удалить файл в стейдж

Выбираем файл, далее в главном меню *Commit > Stage To Commit*

<img src="img/image-20220608084152540.png" alt="image-20220608084152540" style="zoom:80%;" />

Можно и через консоль, но это менее удобно, если файлы лежат глубоко:

```
git add src/main/java/johny/dotsville/App.java
```

Добавить все файлы в стейдж:

```
git add .
```

Удалить файл из стейджа:

```
git restore --staged some/file.c
```

## Откатить изменения в файле

Если файл находится в стейдже, сначала убираем его оттуда:

```
git restore --staged some/file.c
```

Потом уже отменяем изменения, сделанные после последнего коммита:

```
git restore some/file.c
```

## ??? тайник

# Коммиты

## Обычный коммит с сообщением

```
git commit -m "Что сделано, то сделано, чего бухтеть-то?"  // Если сообщение короткое
git commit  // Если сообщение большое и удобнее ввести его через vi
```

## Частичный коммит

Пользуемся для этого `git gui`. Выделяем фрагмент, который хотим закоммитить (нужно выделять как добавленные строки, так и удаленные), *ПКМ > Stage Lines For Commit*

## Прибавить код к последнему коммиту

```
// Сначала добавляем изменения в стейдж
git commit --amend --no-edit  // Если не хотим менять сообщение у коммита
git commit --amend -m "Если хотим изменить сообщение и оно короткое"
git commit --amend  // Если сообщение сложное и хотим ввести его через vi
```

Применять эту команду нужно исключительно к локальным коммитам

## Изменить сообщение к последнему коммиту

```
// НЕ добавляем никаких файлов в стейдж!
git commit --amend -m "Новое сообщение заменит старое"
git commit --amend  // Если хотим редактировать сообщение в vi
```

Применять эту команду нужно исключительно к локальным коммитам

# Ветки

## Список всех веток

```
git branch
```

Покажет все существующие ветки и на какой мы находимся в данный момент. Показывает только локальные ветки.

```
git branch -a
```

Показать не только локальные, но и remote ветки.

## Узнать текущую ветку

```
git branch
git status
```

Первая покажет список всех веток и выделит звездочкой текущую. А вторая показывает общее состояние репозитория (какие файлы добавлены, удалены, модифицированы) и заодно текущую ветку.

## Создать ветку от текущей

И сразу переключиться на нее:

```
git checkout -b "feature/persistence"
```

Без переключения:

```
git branch "feature/persistence"
```

## Создать ветку от другой ветки или коммита

Создадим ветку с названием dev-based от ветки dev:

```
git branch dev-based dev
```

Создадим ветку от определенного коммита (при этом достаточно нескольких первых символов id коммита и это может быть абсолютно любой коммит):

```
           имя новой ветки                id коммита
git branch feature/persistence-a81e-based a81e8c7397
```

## Переключиться на ветку

```
git checkout "features/f1"
```

# Слияние

## merge



## rebase