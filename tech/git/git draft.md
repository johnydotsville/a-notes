# Терминология

Stage

Index

Working tree

# Графический клиент

Команда для запуска дефолтного графического клиента:

```
git gui
```

Весьма удобный клиент, с его помощью можно делать частичный коммит, просматривать историю коммитов.

<img src="img/image-20220608083229745.png" alt="image-20220608083229745" style="zoom:80%;" />



## Настройки

### Кодировка

Если в окне русские буквы отображаются некорректно, заходим в главном меню *Edit > Options*, ищем настройку *Default File Contents Encoding* и меняем на UTF-8.

# Сценарии

## Добавить\удалить файл в стейдж

Выбираем файл, далее в главном меню *Commit > Stage To Commit*

<img src="img/image-20220608084152540.png" alt="image-20220608084152540" style="zoom:80%;" />

Можно и через консоль, но это менее удобно, если файлы лежат глубоко:

```
git add src/main/java/johny/dotsville/App.java
```

Добавить все файлы в стейдж:

```
git add .
```

Удалить файл из стейджа:

```
git restore --staged some/file.c
```

## Откатить изменения в файле

Если файл находится в стейдже, сначала убираем его оттуда:

```
git restore --staged some/file.c
```

Потом уже отменяем изменения, сделанные после последнего коммита:

```
git restore some/file.c
```





## Частичный коммит

Пользуемся для этого `git gui`. Выделяем фрагмент, который хотим закоммитить (удаленные и добавленные строки), *ПКМ > Stage Lines For Commit*

## Ветки

### Список всех веток

```
git branch
```

Покажет все существующие ветки и на какой мы находимся в данный момент. Показывает только локальные ветки.

```
git branch -a
```

Показать не только локальные, но и remote ветки.

### Текущая ветка

```
git branch
git status
```

Первая покажет список всех веток и выделит звездочкой текущую. А вторая показывает общее состояние репозитория (какие файлы добавлены, удалены, модифицированы) и заодно текущую ветку.

### Создать новую ветку от текущей

И сразу переключиться на нее:

```
git checkout -b "feature/persistence"
```

Без переключения:

```
git branch "feature/persistence"
```

### Создать новую ветку от другой ветки или коммита

Создадим ветку с названием dev-based от ветки dev:

```
git branch dev-based dev
```

Создадим ветку от определенного коммита этой же ветки (достаточно нескольких первых символов id коммита):

```
           имя новой ветки                id коммита
git branch feature/persistence-a81e-based a81e8c7397
```

### Переключиться на ветку

```
git checkout
```

