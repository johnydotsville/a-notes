# Особенности гита

* Гит представляет себе историю изменения файлов как последовательность снапшотов. Т.е. каждый коммит является по сути целиковым снимком всего репозитория. Если какие-то файлы не изменились с прошлого коммита, то вместо непосредственно файла в снапшот помещается ссылка на файл.

  Эта модель отличается от других систем контроля версий, которые хранят именно изменения, произошедшие в файлах ("дельты").

* Репозиторий гит полностью автономен. Как только мы клонируем себе репозиторий, нам больше не нужна удаленная (remote) версия. Мы можем коммитить в свою локальную копию, а потом по необходимости отправлять изменения в удаленный репозиторий, или вытягивать из него изменения.

# Логические области

## Git directory

Эта директория является "базой данных" гита, в которой он хранит все свои объекты. Она называется `.git` и создается в папке, в которой мы запускаем команду `git init`.

## Working tree

Или "рабочий каталог" - это папка с файлами проекта, для которого мы используем версионирование. Например, типичная структура java-проекта, использующего мавен:

```java
C:\
  progs\  // <-- Working tree, директория, которая находится под надзором гита.
     .git\  // <-- Git directory, БД гита.
     .idea\
     src\
     target\
     HELP.md
     mvnw
     mvnw.cmd
     pom.xml
```

## Staging area (Index)

Staging area, он же Stage, он же Index - это файл в БД гита, которых хранит информацию, что именно отправится в следующий коммит. Для упрощения восприятия можно считать, что stage это папка, в которую мы должны отправить файлы, чтобы они попали в коммит. Причем в коммит они попадают в том виде, который был на момент отправки в стейдж. На примере:

* Создаем в WT пустой файл.
* Добавляем его в стейдж. Т.е. в стейдже файл оказывается в пустом виде.
* Добавляем в файл какой-нибудь текст.
* Коммитим.
* Коммитится пустой файл. Хотя в момент коммита в файле был какой-то текст, но этот текст не был помещен в стейдж и поэтому не попал в коммит.

Графически:

![file-status-transition.drawio](img/file-status-transition.drawio.svg)

## Stash

TODO



# Workflow

Стандартный процесс работы с файлами выглядит примерно так:

* Работаем с файлами в рабочем каталоге - добавляем новый, редактируем или удаляем старые.
* Когда хотим зафиксировать проделанную работу, добавляем файлы в стейдж.
* Выполняем коммит.

Т.е. файлы проходят такой путь: *Рабочий каталог > Стейдж > Коммит*. Это надо помнить, дальше пригодится.