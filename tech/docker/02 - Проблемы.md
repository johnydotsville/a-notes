В виртуальных машинах с Windows докер работать не будет. Потому что в винде докер работает внутри виртуальной машины линукс. Соответственно, если сама винда виртуализирована, то получается вложенная виртуализация, а докер так не умеет. Но если виртуалка линуксовая, то в ней докер работать будет, потому что линукс для него естественная среда. В винде gui-програ докера и является виртуальной средой.

После установки Docker Desktop на Win 10 была ошибка:

> docker failed to initialize

Как исправил:

* В EFI должна быть включена виртуализация. У меня это была опция Intel Virtualization Technology
* В Windows Features должны быть включены пункты:
  * Платформа виртуальной машины (Virtual Machine Platform)
  * Подсистема Windows для Linux (Windows Subsystem for Linux)
  * Hyper-V

> Включенный пункт "Песочница Windows" тоже приводил к проблемам. После его отключения и перезагрузки компьютера, докер стал работать снова.

В Windows Features (Компоненты Windows) можно зайти из *"Панели управления > Программы и компоненты > Включение или отключение компонентов Windows"*.

WSL (Windows Subsystem for Linux) докер похоже ставит автоматически.

В *Диспетчер задач > Производительность* пункт *Виртуализация* должен показывать *Включено*.

После перезагрузки докер заработал. Не сразу. Сначала висел, пришлось его выключить и включить заново.